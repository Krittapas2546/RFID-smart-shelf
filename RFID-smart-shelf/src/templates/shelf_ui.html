<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Shelf UI</title>
    <!-- 1. ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå CSS ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å -->
    <link rel="stylesheet" href="/static/css/ui_styles.css">
    <style>
      .arrow {
        width: 0;
        height: 0;
        border-left: 12px solid transparent;
        border-right: 12px solid transparent;
        display: inline-block;
        vertical-align: middle;
        margin-right: 8px;
      }
      .arrow.up {
        border-bottom: 18px solid #3498db;
        animation: bounce-up 1s infinite;
      }
      .arrow.down {
        border-top: 18px solid #2ecc71;
        animation: bounce-down 1s infinite;
      }
      @keyframes bounce-up {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-6px); }
      }
      @keyframes bounce-down {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(6px); }
      }
      .queue-list-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        padding: 18px 24px;
        margin-bottom: 18px;
        min-height: 56px;
      }
      .queue-list-item .info {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }
      .queue-list-item .lot {
        font-size: 1.15em;
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 6px;
      }
      .queue-list-item .action {
        font-size: 0.98em;
        color: #666;
        margin-left: 2px;
      }
      .select-btn {
        background: #27ae60;
        color: #fff;
        border: none;
        border-radius: 8px;
        padding: 8px 22px;
        font-size: 1em;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s;
      }
      .select-btn:hover {
        background: #219150;
      }
    </style>
</head>
<body>
    <!-- 2. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á HTML ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• -->

    <!-- View 1: ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡∏Ñ‡∏¥‡∏ß -->
    <div id="queueSelectionView" style="display: none;">
        <h2>Job Queue</h2>

        <!-- üîΩ ADD THIS ENTIRE BLOCK üîΩ -->
        <div class="barcode-scanner-container">
            <input type="text" id="lot-no-input" placeholder="üîç Ready for Barcode Scanner - Scan or type Lot No.">
            <button onclick="handleLotSearch()">Find Job</button>
        </div>
        <!-- üîº END OF ADDED BLOCK üîº -->

        <ul id="queueListContainer">
            <!-- Job items will be injected here by JavaScript -->
        </ul>
    </div>

    <!-- View 2: ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (Active Job) -->
    <main id="mainView" style="display: none;">
        <!-- üîΩ ADD HIDDEN INPUT FOR BARCODE SCANNER üîΩ -->
        <input type="text" id="barcode-scanner-input" style="position: absolute; left: -9999px; opacity: 0;" placeholder="Barcode Scanner Input">
        <!-- üîº END OF ADDED INPUT üîº -->
        
        <div class="shelf-container" id="shelfContainer">
            <div class="details-panel" id="detailsPanel">
                <!-- JavaScript ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
            </div>
            <div class="shelf-panel" id="shelfPanel">
                <h2>Shelf</h2>
                <div class="shelf-frame"><div class="shelf-grid" id="shelfGrid"></div></div>
            </div>
        </div>
    </main>

    <!-- 3. ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå JavaScript ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å (‡∏Ñ‡∏ß‡∏£‡∏ß‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏ó‡πâ‡∏≤‡∏¢ body) -->
    <script src="/static/js/ui_logic.js"></script>
    <script>
      // ‡∏õ‡∏£‡∏±‡∏ö renderQueueSelectionView: ‡∏•‡∏π‡∏Å‡∏®‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤ Lot, ‡πÑ‡∏°‡πà‡∏°‡∏µ label Pick/Place, ‡∏î‡∏π‡∏™‡∏∞‡∏≠‡∏≤‡∏î
      window.renderQueueSelectionView = function(queue) {
        const queueListContainer = document.getElementById('queueListContainer');
        queueListContainer.innerHTML = '';
        queue.forEach(job => {
          const li = document.createElement('li');
          li.className = 'queue-list-item';
          // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å icon ‡∏ï‡∏≤‡∏° action
          let arrowHtml = '';
          if (job.place_flg === '0') {
            arrowHtml = `<span class="arrow up"></span>`;
          } else {
            arrowHtml = `<span class="arrow down"></span>`;
          }
          li.innerHTML = `
            <div class="info">
              <div class="lot">${arrowHtml}Lot: ${job.lot_no}</div>
              <div class="action">Action: ${job.place_flg === '1' ? 'Place' : 'Pick'} at L:${job.level}, B:${job.block}</div>
            </div>
            <button class="select-btn" onclick="selectJob('${job.jobId}')">Select</button>
          `;
          queueListContainer.appendChild(li);
        });

        // Logic focus ‡πÄ‡∏î‡∏¥‡∏°
        const lotInput = document.getElementById('lot-no-input');
        if (lotInput) {
          lotInput.focus();
          lotInput.onkeyup = function(event) {
            if (event.key === 'Enter') {
              handleLotSearch();
            }
          };
        }
      };
    </script>


</html></body></body>
</html>